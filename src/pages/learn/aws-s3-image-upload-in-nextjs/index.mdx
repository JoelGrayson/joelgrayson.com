import LearnPage from "@/components/page/LearnPage";
export default function LearningContent({children}) {
	return <LearnPage markdown bottomPadding>{children}</LearnPage>;
}


# AWS S3 Image Upload in Next.js
1. Create your \<input>:
```tsx
const [image, setImage]=useState<File | undefined>();

<input
    type='file'
    accept="image/jpeg,image/png,image/webp,image/gif"
    onChange={e=>{
        setImage(e.target.files?.[0]);
    }}
/>
```

2. Add to your `.env`:
```
S3_BUCKET_NAME=my_bucket_name
S3_REGION=us-east-1
S3_ACCESS_KEY=...
S3_SECRET_ACCESS_KEY=...
```

3. Run `npm install @aws-sdk/client-s3 @aws-sdk/s3-request-presigner`

4. Implement `getSignedUrl`:
```tsx
import { S3Client, PutObjectCommand } from '@aws-sdk/client-s3';
import { getSignedUrl as s3GetSignedUrl } from '@aws-sdk/s3-request-presigner';
import crypto from 'crypto';
const generateRandomName=()=>crypto.randomBytes(16).toString('hex');
import prisma from '@/data/prisma/client';

const s3=new S3Client({
    region: process.env.S3_REGION!,
    credentials: {
        accessKeyId: process.env.S3_ACCESS_KEY!,
        secretAccessKey: process.env.S3_SECRET_ACCESS_KEY!,
    }
});

export async function getSignedUrl(id: string) {
    const key=await generateRandomName();

    const putObjectCommand=new PutObjectCommand({
        Bucket: process.env.S3_BUCKET_NAME,
        Key: key
    });

    const signedUrl=await s3GetSignedUrl(s3, putObjectCommand, { expiresIn: 60 });
    const imageUrl=signedUrl.split('?')[0];

    // Update your database to include the imageUrl
    await prisma.library.update({
        where: { id }
        data: { imageUrl }
    });

    return signedUrl;
}
```

5. Create your `onSubmit` handler:
```tsx
const signedUrl=await getSignedUrl(id);

fetch(signedUrl, {
    method: 'PUT',
    body: image,
    headers: {
        'Content-Type': image.type,
    }
});
```

